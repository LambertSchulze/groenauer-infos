---
const { date, dateEnd, time, timeEnd } = Astro.props

const optionsDate: Intl.DateTimeFormatOptions = { dateStyle: 'long' }
const optionsTime: Intl.DateTimeFormatOptions = { timeStyle: 'short' }
const optionsDateAndTime = {
  ...optionsDate,
  ...optionsTime
}

let dateTime: string = date
if      (time)                dateTime = dateTime.concat('T', time)
if      (dateEnd && timeEnd)  dateTime = dateTime.concat('/', dateEnd, 'T', timeEnd)
else if (dateEnd && !timeEnd) dateTime = dateTime.concat('/', dateEnd)
else if (!dateEnd && timeEnd) dateTime = dateTime.concat('/', date, 'T', timeEnd)
---

<time datetime={dateTime}>
  {time ?
    new Date(`${date}T${time}`).toLocaleString('de', optionsDateAndTime) :
    new Date(date).toLocaleDateString('de', optionsDate)
  }
  {(dateEnd || timeEnd) &&
    <>
      &mdash;
      {!dateEnd && new Date(`${date}T${timeEnd}`).toLocaleTimeString('de', optionsTime)}
      {(dateEnd && timeEnd) && new Date(`${dateEnd}T${timeEnd}`).toLocaleString('de', optionsDateAndTime)}
    </>
  }
</time>