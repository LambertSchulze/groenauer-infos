---
import BaseLayout from '../../layouts/BaseLayout.astro'
import EventInfo from '../../components/EventInfo.astro'
import { getFilenameFromPath } from '../../helpers'
import type { EventFrontmatter as Frontmatter } from '../../types'

export async function getStaticPaths() {
  const events = await Astro.glob<Frontmatter>('../../../termine/*.md')

  return events.map(event => { return {
    params: {
      slug: getFilenameFromPath(event.file)
    },
    props: {
      frontmatter: event.frontmatter,
      Content: event.Content
    }
  }})
}

const { frontmatter, Content } = Astro.props
---

<BaseLayout>
  <EventInfo event={frontmatter} />
  <Content />
</BaseLayout>
